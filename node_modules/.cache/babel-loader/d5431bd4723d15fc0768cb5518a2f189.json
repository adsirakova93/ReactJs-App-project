{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adsir\\\\OneDrive\\\\Desktop\\\\REACTJS\\\\ReacrJsApp\\\\E-store\\\\src\\\\pages\\\\Success.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation, useHistory } from \"react-router\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SuccessDiv = styled.div`\n  background-image: url(\"https://source.unsplash.com/VJ4pn_PSBLo\");\n  width: 100vw;\n  height: 100vh;\n`;\n_c = SuccessDiv;\nexport default function Success() {\n  _s();\n\n  const location = useLocation();\n  const history = useHistory();\n  console.log(location);\n  const data = location.state.stripeData;\n  const cart = location.state.products;\n  const user = useSelector(state => state.user); // console.log(user.currentUser._id)\n\n  const [orderId, setOrderId] = useState(null);\n  const [show, setShow] = useState(true);\n\n  const handleClose = () => setShow(false);\n\n  useEffect(() => {\n    console.log(\"in success effect\");\n\n    const createOrder = async () => {\n      try {\n        console.log(\"in send\");\n        const res = await axios.post(\"https://e-store.com/order\", {\n          userId: user.currentUser._id,\n          products: cart.products.map(item => ({\n            productId: item._id,\n            productName: item.name,\n            quantity: item._quantity\n          })),\n          amount: cart.total,\n          address: data.billing_details.address\n        }, {\n          headers: {\n            token: user.currentUser.token\n          }\n        });\n        console.log(res);\n        setOrderId(res.data.insertedId);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    data && createOrder();\n  }, [cart, data]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(SuccessDiv, {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        show: show,\n        onHide: handleClose,\n        backdrop: \"static\",\n        centered: true,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Your Order Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: orderId ? `Order has been created successfully. Your order number is ${orderId}` : `Successfull. Your order is being prepared...`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => history.push(\"/\"),\n            style: {\n              padding: 10,\n              marginTop: 20\n            },\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"bg-success\",\n            onClick: () => history.push(\"/order\"),\n            style: {\n              padding: 10,\n              marginTop: 20\n            },\n            children: [\" \", \"Orders\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Success, \"+/7uNBPWs8HpidHuppV12/Nxfx4=\", false, function () {\n  return [useLocation, useHistory, useSelector];\n});\n\n_c2 = Success;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SuccessDiv\");\n$RefreshReg$(_c2, \"Success\");","map":{"version":3,"sources":["C:/Users/adsir/OneDrive/Desktop/REACTJS/ReacrJsApp/E-store/src/pages/Success.jsx"],"names":["axios","useEffect","useState","Button","Modal","useSelector","useLocation","useHistory","styled","SuccessDiv","div","Success","location","history","console","log","data","state","stripeData","cart","products","user","orderId","setOrderId","show","setShow","handleClose","createOrder","res","post","userId","currentUser","_id","map","item","productId","productName","name","quantity","_quantity","amount","total","address","billing_details","headers","token","insertedId","err","push","padding","marginTop"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,iBAA9B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,WAAT,EAAsBC,UAAtB,QAAwC,cAAxC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;;;AAEA,MAAMC,UAAU,GAAGD,MAAM,CAACE,GAAI;AAC9B;AACA;AACA;AACA,CAJA;KAAMD,U;AAMN,eAAe,SAASE,OAAT,GAAmB;AAAA;;AAChC,QAAMC,QAAQ,GAAGN,WAAW,EAA5B;AACA,QAAMO,OAAO,GAAGN,UAAU,EAA1B;AACAO,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACA,QAAMI,IAAI,GAAGJ,QAAQ,CAACK,KAAT,CAAeC,UAA5B;AACA,QAAMC,IAAI,GAAGP,QAAQ,CAACK,KAAT,CAAeG,QAA5B;AACA,QAAMC,IAAI,GAAGhB,WAAW,CAAEY,KAAD,IAAWA,KAAK,CAACI,IAAlB,CAAxB,CANgC,CAOhC;;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBrB,QAAQ,CAAC,IAAD,CAAtC;AAEA,QAAM,CAACsB,IAAD,EAAOC,OAAP,IAAkBvB,QAAQ,CAAC,IAAD,CAAhC;;AACA,QAAMwB,WAAW,GAAG,MAAMD,OAAO,CAAC,KAAD,CAAjC;;AAEAxB,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;;AACA,UAAMY,WAAW,GAAG,YAAY;AAC9B,UAAI;AACFb,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,cAAMa,GAAG,GAAG,MAAM5B,KAAK,CAAC6B,IAAN,CAChB,2BADgB,EAEhB;AACEC,UAAAA,MAAM,EAAET,IAAI,CAACU,WAAL,CAAiBC,GAD3B;AAEEZ,UAAAA,QAAQ,EAAED,IAAI,CAACC,QAAL,CAAca,GAAd,CAAmBC,IAAD,KAAW;AACrCC,YAAAA,SAAS,EAAED,IAAI,CAACF,GADqB;AAErCI,YAAAA,WAAW,EAAEF,IAAI,CAACG,IAFmB;AAGrCC,YAAAA,QAAQ,EAAEJ,IAAI,CAACK;AAHsB,WAAX,CAAlB,CAFZ;AAOEC,UAAAA,MAAM,EAAErB,IAAI,CAACsB,KAPf;AAQEC,UAAAA,OAAO,EAAE1B,IAAI,CAAC2B,eAAL,CAAqBD;AARhC,SAFgB,EAYhB;AACEE,UAAAA,OAAO,EAAE;AACPC,YAAAA,KAAK,EAAExB,IAAI,CAACU,WAAL,CAAiBc;AADjB;AADX,SAZgB,CAAlB;AAkBA/B,QAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACAL,QAAAA,UAAU,CAACK,GAAG,CAACZ,IAAJ,CAAS8B,UAAV,CAAV;AACD,OAtBD,CAsBE,OAAOC,GAAP,EAAY;AACZjC,QAAAA,OAAO,CAACC,GAAR,CAAYgC,GAAZ;AACD;AACF,KA1BD;;AA2BA/B,IAAAA,IAAI,IAAIW,WAAW,EAAnB;AACD,GA9BQ,EA8BN,CAACR,IAAD,EAAOH,IAAP,CA9BM,CAAT;AAgCA,sBACE;AAAA,2BACE,QAAC,UAAD;AAAA,6BACE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAEQ,IAAb;AAAmB,QAAA,MAAM,EAAEE,WAA3B;AAAwC,QAAA,QAAQ,EAAC,QAAjD;AAA0D,QAAA,QAAQ,MAAlE;AAAA,gCACE,QAAC,KAAD,CAAO,MAAP;AAAA,iCACE,QAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,KAAD,CAAO,IAAP;AAAA,oBACGJ,OAAO,GACH,6DAA4DA,OAAQ,EADjE,GAEH;AAHP;AAAA;AAAA;AAAA;AAAA,gBAJF,eASE,QAAC,KAAD,CAAO,MAAP;AAAA,kCACE,QAAC,MAAD;AACE,YAAA,OAAO,EAAE,MAAMT,OAAO,CAACmC,IAAR,CAAa,GAAb,CADjB;AAEE,YAAA,KAAK,EAAE;AAAEC,cAAAA,OAAO,EAAE,EAAX;AAAeC,cAAAA,SAAS,EAAE;AAA1B,aAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAOE,QAAC,MAAD;AACE,YAAA,SAAS,EAAC,YADZ;AAEE,YAAA,OAAO,EAAE,MAAMrC,OAAO,CAACmC,IAAR,CAAa,QAAb,CAFjB;AAGE,YAAA,KAAK,EAAE;AAAEC,cAAAA,OAAO,EAAE,EAAX;AAAeC,cAAAA,SAAS,EAAE;AAA1B,aAHT;AAAA,uBAKG,GALH;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAgCD;;GA7EuBvC,O;UACLL,W,EACDC,U,EAIHF,W;;;MANSM,O","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation, useHistory } from \"react-router\";\nimport styled from \"styled-components\";\n\nconst SuccessDiv = styled.div`\n  background-image: url(\"https://source.unsplash.com/VJ4pn_PSBLo\");\n  width: 100vw;\n  height: 100vh;\n`;\n\nexport default function Success() {\n  const location = useLocation();\n  const history = useHistory();\n  console.log(location);\n  const data = location.state.stripeData;\n  const cart = location.state.products;\n  const user = useSelector((state) => state.user);\n  // console.log(user.currentUser._id)\n  const [orderId, setOrderId] = useState(null);\n\n  const [show, setShow] = useState(true);\n  const handleClose = () => setShow(false);\n\n  useEffect(() => {\n    console.log(\"in success effect\");\n    const createOrder = async () => {\n      try {\n        console.log(\"in send\");\n        const res = await axios.post(\n          \"https://e-store.com/order\",\n          {\n            userId: user.currentUser._id,\n            products: cart.products.map((item) => ({\n              productId: item._id,\n              productName: item.name,\n              quantity: item._quantity,\n            })),\n            amount: cart.total,\n            address: data.billing_details.address,\n          },\n          {\n            headers: {\n              token: user.currentUser.token,\n            },\n          }\n        );\n        console.log(res);\n        setOrderId(res.data.insertedId);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    data && createOrder();\n  }, [cart, data]);\n\n  return (\n    <>\n      <SuccessDiv>\n        <Modal show={show} onHide={handleClose} backdrop=\"static\" centered>\n          <Modal.Header>\n            <Modal.Title>Your Order Status</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            {orderId\n              ? `Order has been created successfully. Your order number is ${orderId}`\n              : `Successfull. Your order is being prepared...`}\n          </Modal.Body>\n          <Modal.Footer>\n            <Button\n              onClick={() => history.push(\"/\")}\n              style={{ padding: 10, marginTop: 20 }}\n            >\n              Home\n            </Button>\n            <Button\n              className=\"bg-success\"\n              onClick={() => history.push(\"/order\")}\n              style={{ padding: 10, marginTop: 20 }}\n            >\n              {\" \"}\n              Orders\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </SuccessDiv>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}